{
    "id": "https://311hub.miamidade.gov/javascript/schemas/service_field_compact.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "schema for an Service Case question list",
    "items": {
        "type": "object",
        "oneOf": [
					{
						"additionalProperties": false,
						"properties": {
							"isDisabled": {
						"type": "string",
						"pattern": "^(true|false)$"
					  },
							"hasBusinessCodes": {
								"pattern": "^,(((NOUPDATE|REQINTAK|FQ_ALERT|SUCCESSR),)*)+$",
								"type": "string"
							},
							"hasOrderBy": {
						"pattern": "^[-+]?[0-9]*.?[0-9]+$",
						"type": "string"
					  },
							"label": {
					"type": "string"
				},
							"hasAllowableModules": {
									"pattern": "^,(((SREINTAK|SRERESAC|SREMASS|SRSNGLWO|SRSUMMRY|WEBINTAK|SRSUMMRY|MD-WCSL),)*)+$",
									"type": "string"
								},
							"type": {
								"pattern": "^ServiceNote$",
								"type": "string"
							},
							"hasDataType": {"$ref": "#/definitions/hasDataType"},
							"iri": {
				"type": "string"
			},
							"hasDataSource": {"$ref": "#/definitions/hasDataSource"},
							"hasLegacyCode": {"$ref": "#/definitions/hasLegacyCode"},
							"hasChoiceValueList": {"$ref": "#/definitions/hasChoiceValueList"}
						},
						"required": [
							"iri",
							"label",
							"hasAllowableModules",
							"hasBusinessCodes",
							"hasDataType",
							"hasOrderBy"
						],
						"type": "object"
					},
					{
						"additionalProperties": false,
						"properties": {
							"isDisabled": {
						"type": "string",
						"pattern": "^(true|false)$"
					  },
							"hasBusinessCodes": {
								"pattern": "^,(((NOUPDATE|REQINTAK|FQ_ALERT|SUCCESSR),)*)+$",
								"type": "string"
							},									
							"hasOrderBy": {
						"pattern": "^[-+]?[0-9]*.?[0-9]+$",
						"type": "string"
					  },
							"hasLegacyCode": {"$ref": "#/definitions/hasLegacyCode"},
							"hasServiceFieldAlert": {"$ref": "#/definitions/hasServiceFieldAlert"},
							"label": {
					"type": "string"
				},									
							"hasAllowableModules": {
									"pattern": "^,(((SREINTAK|SRERESAC|SREMASS|SRSNGLWO|SRSUMMRY|WEBINTAK|SRSUMMRY|MD-WCSL),)*)+$",
									"type": "string"
								},
							"hasDefaultIntakeMethod": {"$ref": "#/definitions/hasDefaultIntakeMethod"},
							"type": {
								"pattern": "^ServiceQuestion$",
								"type": "string"
							},
							"hasChoiceValueList": {"$ref": "#/definitions/hasChoiceValueList"},
							"hasDataType": {"$ref": "#/definitions/hasDataType"},
							"iri": {"$ref": "#/definitions/iri"}
						},
						"required": [
							"iri",
							"label",
							"hasAllowableModules",
							"hasDataType",
							"hasOrderBy"
						],
						"type": "object"
					}
        ]
    },
    "minItems": 1,
    "uniqueItems": true,
    "type": "array",
	"definitions":{
		"isDisabled": {
						"type": "string",
						"pattern": "^(true|false)$"
					  },
		"hasBusinessCodes": {
								"pattern": "^,(((NOUPDATE|REQINTAK|FQ_ALERT|SUCCESSR),)*)+$",
								"type": "string"
							},
		"hasOrderBy": {
						"pattern": "^[-+]?[0-9]*.?[0-9]+$",
						"type": "string"
					  },
		"label": {
					"type": "string"
				},
		"hasAllowableModules": {
									"pattern": "^,(((SREINTAK|SRERESAC|SREMASS|SRSNGLWO|SRSUMMRY|WEBINTAK|SRSUMMRY|MD-WCSL),)*)+$",
									"type": "string"
								},
		"iri": {
				"type": "string"
			},
		"hasLegacyCode": {
							"type": "string"
						},
		"hasServiceFieldAlert":	{
									"oneOf":[
												{"$ref": "#/definitions/hasServiceFieldAlertList"},
												{"$ref": "#/definitions/ServiceFieldAlert"}
											]
								},
		"hasServiceFieldAlertList":	{
										"items": {
												"type": "object",
												"oneOf":[
															{"$ref": "#/definitions/ServiceFieldAlert"}
														]
											},
										"minItems": 1,
										"type": "array"
									},
		"ServiceFieldAlert": {
								"properties": {
									"hasLegacyEvent": {"$ref": "#/definitions/hasLegacyEvent"},
									"hasAnswerObject": {"$ref": "#/definitions/hasAnswerObject"},
									"label": {
					"type": "string"
				},
									"type": {
												"type": "string",
												"pattern": "^QuestionTrigger$"
											},
									"iri": {
				"type": "string"
			}
								},
								"type": "object"
							},
		"hasDataType": {
							"enum": [
								"CHAR",
								"DATE",
								"NUMBER",
								"CHARLIST",
								"CHARMULT",
								"CHAROPT",
								"PHONENUM"
							]
						},
		"hasChoiceValueList": {
									"type": "object",
									"properties": {
										"hasChoiceValue": {
													"oneOf":[
																{"$ref": "#/definitions/ChoiceValue"},
																{"$ref": "#/definitions/ListOfChoiceValues"}
															]
										},
										"label": {
					"type": "string"
				},
										"iri": {
				"type": "string"
			},
										"type": {
											"type": "string",
											"pattern": "^ChoiceValueList$"
										}
										
									}
								},
		"ListOfChoiceValues": {
								"items": {
											"type": "object",
											"oneOf":[
														{"$ref": "#/definitions/ChoiceValue"}
													]
										},
								"minItems": 1,
								"type": "array"
							},
		"ChoiceValue": {
							"type": "object",
							"additionalProperties": false,
							"properties": {
								"label": {
					"type": "string"
				},
								"iri": {
				"type": "string"
			},
								"hasLegacyCode": {"$ref": "#/definitions/hasLegacyCode"},
								"hasOrderBy": {
						"pattern": "^[-+]?[0-9]*.?[0-9]+$",
						"type": "string"
					  },
								"isDisabled": {
						"type": "string",
						"pattern": "^(true|false)$"
					  },
								"type": {
									"type": "string",
									"pattern": "^ChoiceValue$"
								}
							}
						},
		"ynQuestion": {
						"enum": [
									"Y",
									"N"
								]
					},
		"hasDefaultIntakeMethod": {
									"type": "object",
									"properties": {
										"hasOrderBy": {
						"pattern": "^[-+]?[0-9]*.?[0-9]+$",
						"type": "string"
					  },
										"hasLegacyCode": {"$ref": "#/definitions/hasLegacyCode"},
										"label": {
					"type": "string"
				},
										"isAlwaysPublic": {"$ref": "#/definitions/ynQuestion"},
										"type": {
													"type": "string",
													"pattern": "^IntakeMethod$"
												},
										"iri": {"$ref": "#/definitions/iri"}
									  }
									},		
		"hasLegacyInterface": {
								"items": {
											"type": "object"
										},
								"minItems": 1,
								"type": "array"
							},
		"hasLegacyEvent": {
							"type": "object",
							"properties": {
								"label": {
					"type": "string"
				},
								"type": {
											"type": "string",
											"pattern": "^ServiceFieldAlert$"
										},
								"iri": {
				"type": "string"
			}
							}
						},
		"hasAnswerObject": {
								"type": "object",
								"properties": {
												  "hasLegacyCode": {"$ref": "#/definitions/hasLegacyCode"},
												  "label": {
					"type": "string"
				},
												  "type": {
															"type": "string",
															"pattern": "^ChoiceValue$"
														},
												  "iri": {
				"type": "string"
			}
											}
            },
		"hasDataSource": {
							"type": "object",
							"properties": {
											  "providedBy": {"$ref": "#/definitions/providedBy"},
											  "label": {
					"type": "string"
				},
											  "type": {
														"type": "string",
														"pattern": "^EventBasedDataSource$"
													},
											  "iri": {
				"type": "string"
			},
											  "hasPropertyName": {"$ref": "#/definitions/label"}
										}
						},
		"providedBy": {
						"type": "object",
						"properties": {
										"label": {
					"type": "string"
				},
										"type": {
													"type": "string",
													"pattern": "^ClientSideEventType$"
												},
										"iri": {
				"type": "string"
			}
						}
					  }
	}
}